<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>stdgpu: Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="stdgpu_logo.png" height="70" vspace="5" hspace="5"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">
   &#160;<span id="projectnumber"><font size="5">1.2.0</font></span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="about-the-project"></a>
About the Project</h1>
<p>stdgpu is an open-source library which provides several generic GPU data structures for fast and reliable data management. stdgpu lets you write more complex algorithms rapidly that look like sequential CPU code but are executed in parallel on the GPU.</p>
<ul>
<li><b>Productivity</b>. Previous libraries such as thrust, VexCL, ArrayFire or Boost.Compute focus on the fast and efficient implementation of various algorithms for contiguously stored data to enhance productivity. stdgpu follows an <em>orthogonal approach</em> and focuses on <em>fast and reliable data management</em> to enable the rapid development of more general and flexible GPU algorithms just like their CPU counterparts.</li>
<li><b>Interoperability</b>. Instead of providing yet another ecosystem, stdgpu is designed to be a <em>lightweight container library</em>. Therefore, a core feature of stdgpu is its interoperability with previous established frameworks, i.e. the thrust library, to enable a <em>seamless integration</em> into new as well as existing projects.</li>
<li><b>Maintainability</b>. Following the trend in recent C++ standards of providing functionality for safer and more reliable programming, the philosophy of stdgpu is to provide <em>clean and familiar functions</em> with strong guarantees that encourage users to write <em>more robust code</em> while giving them full control to achieve a high performance.</li>
</ul>
<p>stdgpu has been developed as part of the SLAMCast live telepresence system which performs real-time, large-scale 3D scene reconstruction from RGB-D camera images as well as real-time data streaming between a server and an arbitrary number of remote clients. We hope to foster further developments towards unified CPU and GPU computing and welcome contributions from the community.</p>
<h1><a class="anchor" id="getting-started"></a>
Getting Started</h1>
<p>To compile the library, please make sure to fulfill the build requirements and execute the respective build scripts.</p>
<h2><a class="anchor" id="prerequisites"></a>
Prerequisites</h2>
<p>The following components (or newer versions) are required to build the library:</p>
<ul>
<li>C++14 compiler (one of the following):<ul>
<li>Ubuntu 18.04:<ul>
<li>GCC 7: <code>sudo apt install build-essential</code></li>
<li>Clang 6: <code>sudo apt install clang</code></li>
</ul>
</li>
<li>Windows:<ul>
<li>MSVC 19.2x (Visual Studio 2019)</li>
</ul>
</li>
</ul>
</li>
<li>CMake 3.15: <code><a href="https://apt.kitware.com/">https://apt.kitware.com/</a></code></li>
<li>Doxygen 1.8.13 (optional): <code>sudo apt install doxygen</code></li>
<li>lcov 1.13 (optional): <code>sudo apt install lcov</code></li>
</ul>
<p>Depending on the used backend, additional components (or newer versions) are required:</p>
<ul>
<li>CUDA Backend:<ul>
<li>CUDA 10.0: <code><a href="https://developer.nvidia.com/cuda-downloads">https://developer.nvidia.com/cuda-downloads</a></code></li>
</ul>
</li>
<li>OpenMP Backend:<ul>
<li>OpenMP 2.0</li>
<li>thrust 1.9.3: included in CUDA, but also available at <code><a href="https://github.com/thrust/thrust">https://github.com/thrust/thrust</a></code></li>
</ul>
</li>
</ul>
<p>Older compiler versions may also work but are currently considered experimental and untested.</p>
<h2><a class="anchor" id="building"></a>
Building</h2>
<p>For convenience, we provide several cross-platform scripts to build the project. Note that some scripts depend on the build type, so there are scripts for both <code>debug</code> and <code>release</code> builds.</p>
<table class="doxtable">
<tr>
<th>Command </th><th>Effect  </th></tr>
<tr>
<td><code>sh&#160;scripts/setup_&lt;build_type&gt;.sh</code> </td><td>Performs a full clean build of the project. Removes old build, configures the project (build path: <code>./build</code>), builds the project, and runs the unit tests. </td></tr>
<tr>
<td><code>sh&#160;scripts/build_&lt;build_type&gt;.sh</code> </td><td>(Re-)Builds the project. Requires that project is configured (or set up). </td></tr>
<tr>
<td><code>sh&#160;scripts/run_tests_&lt;build_type&gt;.sh</code> </td><td>Runs the unit tests. Requires that project is built. </td></tr>
<tr>
<td><code>sh&#160;scripts/create_documentation.sh</code> </td><td>Builds the documentation locally. Requires doxygen and that project is configured (or set up). </td></tr>
<tr>
<td><code>sh&#160;scripts/run_coverage.sh</code> </td><td>Builds a test coverage report locally. Requires lcov and that project is configured (or set up). </td></tr>
<tr>
<td><code>sh&#160;scripts/install_&lt;build_type&gt;.sh</code> </td><td>Installs the project at the configured install path (default: <code>./bin</code>). </td></tr>
</table>
<h1><a class="anchor" id="usage"></a>
Usage</h1>
<p>In the following, we show some examples on how the library can be integrated into and used in a project.</p>
<h2><a class="anchor" id="cmake-integration"></a>
CMake Integration</h2>
<p>To use the library in your project, you can either install it externally first and then include it using <code>find_package</code>:</p>
<div class="fragment"><div class="line">find_package(stdgpu 1.0.0 REQUIRED)</div><div class="line"></div><div class="line">add_library(foo ...)</div><div class="line"></div><div class="line">target_link_libraries(foo PUBLIC stdgpu::stdgpu)</div></div><!-- fragment --><p>Or you can embed it into your project and build it from a subdirectory:</p>
<div class="fragment"><div class="line"># Exclude the examples from the build</div><div class="line">set(STDGPU_BUILD_EXAMPLES OFF CACHE INTERNAL &quot;&quot;)</div><div class="line"></div><div class="line"># Exclude the tests from the build</div><div class="line">set(STDGPU_BUILD_TESTS OFF CACHE INTERNAL &quot;&quot;)</div><div class="line"></div><div class="line">add_subdirectory(stdgpu)</div><div class="line"></div><div class="line">add_library(foo ...)</div><div class="line"></div><div class="line">target_link_libraries(foo PUBLIC stdgpu::stdgpu)</div></div><!-- fragment --><h2><a class="anchor" id="cmake-options"></a>
CMake Options</h2>
<p>To configure the library, two sets of options are provided. The following build options control the build process:</p>
<table class="doxtable">
<tr>
<th>Build Option </th><th>Effect </th><th>Default  </th></tr>
<tr>
<td><code>STDGPU_BACKEND</code> </td><td>Device system backend </td><td><code>STDGPU_BACKEND_CUDA</code> </td></tr>
<tr>
<td><code>STDGPU_SETUP_COMPILER_FLAGS</code> </td><td>Constructs the compiler flags </td><td><code>ON</code> if standalone, <code>OFF</code> if included via <code>add_subdirectory</code> </td></tr>
<tr>
<td><code>STDGPU_BUILD_SHARED_LIBS</code> </td><td>Builds the project as a shared library, if set to <code>ON</code>, or as a static library, if set to <code>OFF</code> </td><td><code>BUILD_SHARED_LIBS</code> </td></tr>
<tr>
<td><code>STDGPU_BUILD_EXAMPLES</code> </td><td>Build the examples </td><td><code>ON</code> </td></tr>
<tr>
<td><code>STDGPU_BUILD_TESTS</code> </td><td>Build the unit tests </td><td><code>ON</code> </td></tr>
<tr>
<td><code>STDGPU_BUILD_TEST_COVERAGE</code> </td><td>Build a test coverage report </td><td><code>OFF</code> </td></tr>
</table>
<p>In addition, the implementation of some functionality can be controlled via configuration options:</p>
<table class="doxtable">
<tr>
<th>Configuration Option </th><th>Effect </th><th>Default  </th></tr>
<tr>
<td><code>STDGPU_ENABLE_AUXILIARY_ARRAY_WARNING</code> </td><td>Enable warnings when auxiliary arrays are allocated in memory API </td><td><code>OFF</code> </td></tr>
<tr>
<td><code>STDGPU_ENABLE_CONTRACT_CHECKS</code> </td><td>Enable contract checks </td><td><code>OFF</code> if <code>CMAKE_BUILD_TYPE</code> equals <code>Release</code> or <code>MinSizeRel</code>, <code>ON</code> otherwise </td></tr>
<tr>
<td><code>STDGPU_ENABLE_MANAGED_ARRAY_WARNING</code> </td><td>Enable warnings when managed memory is initialized on the host side but should be on device in memory API </td><td><code>OFF</code> </td></tr>
<tr>
<td><code>STDGPU_USE_32_BIT_INDEX</code> </td><td>Use 32-bit instead of 64-bit signed integer for <code>index_t</code> </td><td><code>ON</code> </td></tr>
<tr>
<td><code>STDGPU_USE_FAST_DESTROY</code> </td><td>Use fast destruction of allocated arrays (filled with a default value) by omitting destructor calls in memory API </td><td><code>OFF</code> </td></tr>
<tr>
<td><code>STDGPU_USE_FIBONACCI_HASHING</code> </td><td>Use Fibonacci Hashing instead of Modulo to compute hash bucket indices </td><td><code>ON</code> </td></tr>
</table>
<h2><a class="anchor" id="examples"></a>
Examples</h2>
<p>This library offers flexible interfaces to reliably perform complex tasks on the GPU such as the creation of the update set at the server component of the related SLAMCast system:</p>
<div class="fragment"><div class="line"><span class="keyword">namespace </span><a class="code" href="namespacestdgpu.html">stdgpu</a></div><div class="line">{</div><div class="line"><span class="keyword">template</span> &lt;&gt;</div><div class="line"><span class="keyword">struct </span>hash&lt;short3&gt;</div><div class="line">{</div><div class="line">    <span class="keyword">inline</span> <a class="code" href="platform_8h.html#ab6e41d965f54b8f40fdd4cc553ddf313">STDGPU_HOST_DEVICE</a> std::size_t</div><div class="line">    <a class="code" href="structstdgpu_1_1hash.html#a0320bfd1f0f3d0f647da4e188b5f676c">operator()</a>(<span class="keyword">const</span> short3&amp; key)<span class="keyword"> const</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keywordflow">return</span> key.x * 73856093</div><div class="line">             ^ key.y * 19349669</div><div class="line">             ^ key.z * 83492791;</div><div class="line">    }</div><div class="line">};</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Spatial hash map for voxel block management</span></div><div class="line"><span class="keyword">using</span> block_map = <a class="code" href="classstdgpu_1_1unordered__map.html">stdgpu::unordered_map&lt;short3, voxel*&gt;</a>;</div><div class="line"></div><div class="line"></div><div class="line">__global__ <span class="keywordtype">void</span></div><div class="line">compute_update_set(<span class="keyword">const</span> short3* blocks,</div><div class="line">                   <span class="keyword">const</span> <a class="code" href="cstddef_8h.html#ab7d7736cf297f156865dc68630727f2f">stdgpu::index_t</a> n,</div><div class="line">                   <span class="keyword">const</span> block_map tsdf_block_map,</div><div class="line">                   <a class="code" href="classstdgpu_1_1unordered__set.html">stdgpu::unordered_set&lt;short3&gt;</a> mc_update_set)</div><div class="line">{</div><div class="line">    <span class="comment">// Global thread index</span></div><div class="line">    <a class="code" href="cstddef_8h.html#ab7d7736cf297f156865dc68630727f2f">stdgpu::index_t</a> i = blockIdx.x * blockDim.x + threadIdx.x;</div><div class="line">    <span class="keywordflow">if</span> (i &gt;= n) <span class="keywordflow">return</span>;</div><div class="line"></div><div class="line">    short3 b_i = blocks[i];</div><div class="line"></div><div class="line">    <span class="comment">// Neighboring candidate blocks for the update</span></div><div class="line">    short3 mc_blocks[8]</div><div class="line">    = {</div><div class="line">        short3(b_i.x - 0, b_i.y - 0, b_i.z - 0),</div><div class="line">        short3(b_i.x - 1, b_i.y - 0, b_i.z - 0),</div><div class="line">        short3(b_i.x - 0, b_i.y - 1, b_i.z - 0),</div><div class="line">        short3(b_i.x - 0, b_i.y - 0, b_i.z - 1),</div><div class="line">        short3(b_i.x - 1, b_i.y - 1, b_i.z - 0),</div><div class="line">        short3(b_i.x - 1, b_i.y - 0, b_i.z - 1),</div><div class="line">        short3(b_i.x - 0, b_i.y - 1, b_i.z - 1),</div><div class="line">        short3(b_i.x - 1, b_i.y - 1, b_i.z - 1),</div><div class="line">    };</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span> (<a class="code" href="cstddef_8h.html#ab7d7736cf297f156865dc68630727f2f">stdgpu::index_t</a> j = 0; j &lt; 8; ++j)</div><div class="line">    {</div><div class="line">        <span class="comment">// Only consider existing neighbors</span></div><div class="line">        <span class="keywordflow">if</span> (tsdf_block_map.contains(mc_blocks[j]))</div><div class="line">        {</div><div class="line">            mc_update_set.<a class="code" href="classstdgpu_1_1unordered__set.html#ac04e4f261bf5595d7bd98767f7d786ef">insert</a>(mc_blocks[j]);</div><div class="line">        }</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>On the other hand, simpler tasks such as the integration of a range of values can be expressed very conveniently:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>stream_set</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="keywordtype">void</span></div><div class="line">    add_blocks(<span class="keyword">const</span> short3* blocks,</div><div class="line">               <span class="keyword">const</span> <a class="code" href="cstddef_8h.html#ab7d7736cf297f156865dc68630727f2f">stdgpu::index_t</a> n)</div><div class="line">    {</div><div class="line">        <span class="keyword">set</span>.insert(stdgpu::make_device(blocks),</div><div class="line">                   stdgpu::make_device(blocks + n));</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// Further functions</span></div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <a class="code" href="classstdgpu_1_1unordered__set.html">stdgpu::unordered_set&lt;short3&gt;</a> <span class="keyword">set</span>;</div><div class="line">    <span class="comment">// Further members</span></div><div class="line">};</div></div><!-- fragment --><p>More examples can be found in the <a href="https://github.com/stotko/stdgpu/tree/master/examples"><code>examples</code></a> directory.</p>
<h1><a class="anchor" id="contributing"></a>
Contributing</h1>
<p>For detailed information on how to contribute, see <a href="https://github.com/stotko/stdgpu/blob/master/CONTRIBUTING.md"><code>CONTRIBUTING</code></a>.</p>
<h1><a class="anchor" id="license"></a>
License</h1>
<p>Distributed under the Apache 2.0 License. See <a href="https://github.com/stotko/stdgpu/blob/master/LICENSE"><code>LICENSE</code></a> for more information.</p>
<p>If you use this library in one of your research projects, please also cite the related literature:</p>
<div class="fragment"><div class="line">@UNPUBLISHED{stotko2019stdgpu,</div><div class="line">    author = {Stotko, Patrick},</div><div class="line">     title = {{stdgpu: Efficient STL-like Data Structures on the GPU}},</div><div class="line">      year = {2019},</div><div class="line">     month = aug,</div><div class="line">      note = {arXiv:1908.05936},</div><div class="line">       url = {https://arxiv.org/abs/1908.05936}</div><div class="line">}</div></div><!-- fragment --><div class="fragment"><div class="line">@article{stotko2019slamcast,</div><div class="line">    author = {Stotko, P. and Krumpen, S. and Hullin, M. B. and Weinmann, M. and Klein, R.},</div><div class="line">     title = {{SLAMCast: Large-Scale, Real-Time 3D Reconstruction and Streaming for Immersive Multi-Client Live Telepresence}},</div><div class="line">   journal = {IEEE Transactions on Visualization and Computer Graphics},</div><div class="line">    volume = {25},</div><div class="line">    number = {5},</div><div class="line">     pages = {2102--2112},</div><div class="line">      year = {2019}</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="Contact"></a>
Contact</h1>
<p>Patrick Stotko - <a href="#" onclick="location.href='mai'+'lto:'+'sto'+'tk'+'o@c'+'s.'+'uni'+'-b'+'onn'+'.d'+'e'; return false;">stotko@cs.uni-bonn.de</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
</body>
</html>
